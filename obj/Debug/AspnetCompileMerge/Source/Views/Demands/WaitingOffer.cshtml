@model netline.purchaseoffer.Models.Ntl_Offer
<link href="~/Content/css/modals.css" rel="stylesheet" />
@{
    ViewBag.Title = "Bekleyen Teklifler";
    Layout = "~/Views/Shared/_MainLayout.cshtml";



}

<style>
    .container {
        max-width: 820px;
        margin: 0px auto;
        margin-top: 50px;
    }

    .comment {
        float: left;
        width: 100%;
        height: auto;
    }

    .commenter {
        float: left;
    }

        .commenter img {
            width: 35px;
            height: 35px;
        }

    .comment-text-area {
        float: left;
        width: 100%;
        height: auto;
    }

    .textinput {
        float: left;
        width: 100%;
        min-height: 75px;
        outline: none;
        resize: none;
        border: 1px solid grey;
    }

    #pop {
        display: none;
        position: absolute;
        z-index: 99999;
        padding: 2px;
        background: red;
        border: 1px solid white;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        margin: 0px;
        -webkit-box-shadow: 0px 0px 5px 0px rgba(164, 164, 164, 1);
        box-shadow: 0px 0px 5px 0px rgba(164, 164, 164, 1);
        width: 100%
    }
</style>
<script type="text/javascript">
$(document).ready(function() {
    $("[id*='Explanation']" ).change(function() {
        saveProjectOfferExplanation(@Model.ProjectId)
        });

    setLowestTotal();

     $("input[name='txtResponded3']").hover(function() {

        $('#pop').toggle();
    });


    getSupplier();
    $("#search_SupplierCode").keyup(function(e) {
        getSupplier();
    });
    $("#search_SupplierDesc").keyup(function(e) {
        getSupplier();
    });

    $("#isDeliveryAddress").change(function() {
        if ($(this).is(":checked")) {
            $('#DeliveryAddress').removeAttr('readonly');

        } else {
            $('#DeliveryAddress').attr('readonly', 'readonly');
        }
    });




});

function showDeleteBtn()
{
        $("[name='btnDeleteOffer']").removeAttr('hidden');
        $("[name='BtnDeleteBtnHider']").removeAttr('hidden');
        $("[name='BtnDeleteBtnShower']").attr('hidden', 'hidden');
    }
function hideDeleteBtn()
{
       $("[name='btnDeleteOffer']").attr('hidden', 'hidden');
        $("[name='BtnDeleteBtnShower']").removeAttr('hidden');
        $("[name='BtnDeleteBtnHider']").attr('hidden', 'hidden');


    }
function sendRequest() {
    var rowCount = $("#SupplierTable >tbody >tr").length;
    var html = "";

    var Suppliers = [];
    for (var i = 0; i < rowCount; i++) {

        if ($("#cboxRequestSupplier_" + i.toString()).is(":checked")) {
            var SupplierCode = $("#Suppliers_" + i.toString() + "__SupplierCode").val();
            var SupplierDesc = $("#Suppliers_" + i.toString() + "__SupplierDesc").val();
            var SupplierRef = $("#Suppliers_" + i.toString() + "__SupplierRef").val();

            Suppliers.push(SupplierRef);

            html = html + " <tr>";
            html = html + "    <td style=\"width:30%;font-weight:bold\">" + SupplierCode + "</td> ";
            html = html + "    <td  style=\"width:10%;font-weight:bold\"> - </td> ";
            html = html + "    <td  style=\"width:60%;font-weight:bold\">" + SupplierDesc + "</td> ";


            html = html + " </tr>";
        }
    }


    $.ajax({
        type: 'Post',
        contentType: "application/json;",
        dataType: "json",
        url: baseUrl() + "/Ajax/SetSuppliers",
        data: JSON.stringify(Suppliers),
        success: function(data) {
            var html = successHandlerSupplier(data);

            $("[id*='supplierList']").html(html);

        },
        error: function(data) {

        }
    });


    $("#ListForRequest").html(html);




    $('#ModalSendRequest').modal('show');


};
</script>
@using (Html.BeginForm("WaitingOffer", "Demands", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="col-lg-12 row">
        @Html.TextBoxFor(model => @Model.ProjectId, new { @class = "form-control hidden", @type = "text" })
        <label class="control-label col-lg-1" style="margin-top: 10px">Proje No</label>
        <div class="col-lg-2 row">
            @Html.TextBoxFor(model => model.ProjectNr, new { @readonly = "readonly", @class = "form-control ", @type = "text", @style = "font-weight: bold;max-width:150px;font-size:12px !Important" })
        </div>
        <label class="control-label col-lg-1" style="margin-top: 10px">İhale Başlangıç Tarihi</label>
        <div class="col-lg-2">
            <div class="form-group-inner">
                <div class="row">
                    <div class="date-picker-inner ">
                        <div class="form-group data-custon-pick" id="data_1">
                            <div class="input-group date col-lg-12">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>

                                @Html.TextBoxFor(model => Model.OfferDate, "{0:dd.MM.yyyy}", new { @class = "form-control", @style = "font-weight: bold;max-width:150px;font-size:12px !Important" })

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <label class="control-label col-lg-1" style="margin-top: 10px">İhale Bitiş Tarihi</label>
        <div class="col-lg-2">
            <div class="form-group-inner">
                <div class="row">
                    <div class="date-picker-inner ">
                        <div class="form-group data-custon-pick" id="data_1">
                            <div class="input-group date col-lg-12">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                @Html.TextBoxFor(model => Model.EndDate, "{0:dd.MM.yyyy}", new { @class = "form-control", @style = "font-weight: bold;max-width:150px;font-size:12px !Important" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-12 row">
        <div class="col-lg-6 row">
        </div>
        <label class="control-label col-lg-1" style="margin-top: 10px">İhale Bitiş Saati</label>
        <div class="col-lg-2">
            <div class="form-group-inner">
                <div class="row">
                    <div class="date-picker-inner ">
                        <div class="form-group data-custon-pick" id="data_1">
                            <div class="input-group fc-time col-lg-4">
                                <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
                                @Html.TextBoxFor(model => Model.EndTime, "{0:hh\\:mm}", new { @class = "form-control", @style = "font-weight: bold;max-width:150px;font-size:12px !Important", @type = "time" })

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <br />
    <div class="form-group">
        <div class="col-md-offset-8 col-md-4" style="margin-top:25px;margin-bottom:25px">


            <button type="submit" name="command" style="margin-right:5px" value="saveDemand" class="btn btn-info  pull-right"><i class="fa fa-save adminpro-informatio" aria-hidden="true"></i> Kaydet</button>

            <button type="button" style="margin-top:0px;margin-right:5px" data-target="#ModalCancelOffer" data-toggle="modal" class="btn btn-rounded  btn-danger pull-right"><i class="fa fa-remove adminpro-informatio" aria-hidden="true"></i> İptal </button>




            @if (Model.OfferCount == 0)
            {

                <button onclick="sendRequest()" style="margin-right:5px" type="button" class="btn btn-success pull-right "><i class="fa fa-first-order adminpro-informatio"></i> Teklif İste</button>

            }
            else
            {
                <button onclick="sendRequest()" style="margin-right:5px" type="button" class="btn btn-success  pull-right "><i class="fa fa-first-order adminpro-informatio"></i> Revize İste</button>

                <a type="button" style="margin-top:0px;margin-right:5px" href="@Url.Action("Confirm", "Demands",new { ProjectId=@Model.ProjectId})" class="btn btn-rounded  btn-warning pull-right"><i class="fa fa-check-circle adminpro-informatio" aria-hidden="true"></i> Onay Durumu</a>

            }

            <div id="ModalSendRequest" class="modal modal-adminpro-general Customwidth-popup-WarningModal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-close-area modal-close-df">
                            <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
                        </div>
                        <div class="modal-body">
                            <br />
                            <br />
                            Aşağıdaki firmalara teklif isteği gönderilecek.  <br />Emin misiniz?
                            <br />
                            <table id="requestListTable" width="100%">
                                <tbody id="ListForRequest"></tbody>
                            </table>
                            <br /> <br />
                        </div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-rounded  btn-warning"><i class="fa fa-backward adminpro-informatio" aria-hidden="true"></i> Vazgeç</button>
                            <button onclick="closeModal('ModalSendRequest')" type="submit" name="command" value="sendForOffer" class="btn btn-success "><i class="fa fa-check-circle-o adminpro-informatio" aria-hidden="true"></i> Tamam</button>

                        </div>
                    </div>
                </div>
            </div>


            <a type="button" style="margin-top:0px;" target="_blank" href="@Url.Action("OfferView", "Demands",new { ProjectId= Model.ProjectId })" class="btn btn-rounded  btn-primary"><i class="fa fa-street-view adminpro-informatio" aria-hidden="true"></i> Ön İzleme</a>

        </div>
    </div>
    <div class="col-lg-12">
        <table id="OfferLineTable" style="padding:2px;width:100%" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <td colspan="6" style="font-weight:bolder" align="center">Ürünler</td>
                    <td colspan="4" style="font-weight:bolder" align="center"> Son Satın Alma Fiyatları</td>
                </tr>
                <tr>
                    <td style="width:10%">Talep No</td>
                    <td style="width:10%">Talep Eden</td>
                    <td style="width:10%">Grup Kodu</td>
                    <td style="width:10%">Malzeme Açıklaması</td>
                    <td align="center"> Miktar</td>
                    <td>Birim </td>
                    <td align="center"> KDV Hariç Birim Fiyatı</td>
                    <td align="center"> KDV Hariç Toplam Tutar </td>
                    <td align="center">Kdv Oranı %  </td>
                    <td align="center">KDV Dahil Toplam Tutar</td>

                </tr>

            </thead>

            <tbody>
                @{ double sumNetTotal=0; double sumTotal=0; double sumKdv=0;}
                @for (int i = 0; i < Model.Lines.Count; i++)
                {

                    sumNetTotal += @Model.Lines[i].NetTotal;
                    sumTotal += @Model.Lines[i].Total;
                    sumKdv += @Model.Lines[i].NetTotal - @Model.Lines[i].Total;
                    <tr>
                        @Html.TextBoxFor(model => @Model.Lines[i].ItemRef, new { @class = "form-control hidden", @type = "text" })
                        @Html.TextBoxFor(model => @Model.Lines[i].isContract, new { @class = "form-control hidden", @type = "text" })
                        @for (int j = 0; j < @Model.Lines[i].TransRef.Count; j++)
                        {
                            @Html.TextBoxFor(model => @Model.Lines[i].TransRef[j], new { @class = "form-control hidden", @type = "text" })

                        }
                        <td>
                            @Html.TextBoxFor(model => @Model.Lines[i].SlipNr, new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important" })
                        </td>
                        <td>
                            @Html.TextBoxFor(model => @Model.Lines[i].PersonName, new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important" })
                        </td>
                        <td>
                            @Html.TextBoxFor(model => @Model.Lines[i].ItemGrpCode, new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important" })
                        </td>


                        <td>
                            @Html.TextBoxFor(model => @Model.Lines[i].ItemDesc, new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important" })
                        </td>
                        <td align="right">
                            @Html.TextBoxFor(model => @Model.Lines[i].Quantity, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right" })
                        </td>
                        <td>
                            @Html.TextBoxFor(model => @Model.Lines[i].Unit, new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important" })
                        </td>
                        <td align="right">

                            @Html.TextBoxFor(model => @Model.Lines[i].LastPurchPrice, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right" })

                        </td>
                        <td align="right">

                            @Html.TextBoxFor(model => @Model.Lines[i].Total, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right" })

                        </td>
                        <td align="right">

                            @Html.TextBoxFor(model => @Model.Lines[i].VatRate, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right" })

                        </td>
                        <td align="right">
                            @Html.TextBoxFor(model => @Model.Lines[i].NetTotal, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right" })

                        </td>
                    </tr>

                }
                <tr>
                    <td colspan="10" style="height:10px;background-color:lightgray"></td>
                </tr>
                <tr style="font-size:18px;background-color:lightyellow">
                    <td colspan="7" style="border-bottom:0 solid transparent !important;text-align:right;font-weight:bold"> Genel Toplam</td>
                    <td style="font-weight:bold;text-align:right">@sumTotal.ToString("N2")</td>
                    <td style="font-weight:bold;text-align:right"></td>
                    <td style="font-weight:bold;text-align:right">@sumNetTotal.ToString("N2")</td>
                </tr>

            </tbody>
        </table>
    </div>


    <br />


    <div class="col-lg-12">
        <div class="col-lg-12">
            <div id="ModalSuppliers" class="modal modal-adminpro-general Customwidth-popup-WarningModal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-close-area modal-close-df">
                            <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
                        </div>
                        <div class="modal-body">
                            <br />

                            <br />
                            <h2>Tedarikçi Firmalar</h2>
                            <br />
                            <table width="100%" border="1" id="SelectSupplierTable">
                                <thead>
                                    <tr>
                                        <td style="width: 5% ; font-weight:bold"></td>
                                        <td style="width: 35%; font-weight:bold"> Tedarikçi Kodu</td>
                                        <td style="width: 55%; font-weight:bold">Tedarikçi Unvanı</td>
                                        <td style="width: 5%; font-weight:bold"></td>
                                    </tr>
                                </thead>
                                <thead>
                                    <tr>
                                        <td style="width: 10%"></td>
                                        <td style="width: 25%">  <input type="text" id="search_SupplierCode" style="border-color:lightgray; border-radius:10px" class="form-control " placeholder="Ara"></td>
                                        <td style="width: 50%"><input type="text" id="search_SupplierDesc" style="border-color:lightgray; border-radius:10px" class="form-control" placeholder="Ara"></td>
                                        <td style="width: 15%"></td>
                                    </tr>
                                </thead>
                                <tbody id="supplierList"></tbody>
                            </table>
                            <br /> <br />
                        </div>
                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-rounded  btn-warning"><i class="fa fa-recycle adminpro-informatio" aria-hidden="true"></i> Vazgeç</button>

                            <button data-dismiss="modal" type="button" onclick="SelectSupplier()" class="btn btn-success"><i class="fa fa-search adminpro-informatio" aria-hidden="true"></i> Seç</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-1 col-md-6 col-sm-6 col-xs-12">
                        <button data-target="#ModalSuppliers" data-toggle="modal" type="button" style="margin-bottom:5px" class="btn btn-success"><i class="fa fa-address-book"></i> Tedarikçi Ekle</button>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div id="supplierAddedWarning" class="hidden">
                            <div class="alert alert-warning alert-st-three" role="alert">
                                <i class="fa fa-exclamation-triangle adminpro-warning-danger admin-check-pro" aria-hidden="true" style="line-height:50px"></i>
                                <p class="message-mg-rt" style="line-height:50px">
                                    <strong style="font-size:20px"> &nbsp;&nbsp; Eklediğiniz tedarikçi için projeyi kayıt etmeniz gerekiyor..</strong>
                                    <button type="submit" name="command" style="margin-right:5px;margin-top:0px" value="saveDemand" class="btn btn-info "><i class="fa fa-save adminpro-informatio" aria-hidden="true"></i> Kaydet</button>
                                </p>

                            </div>

                        </div>
                    </div>
                </div>
            </div>


            <br />
            @Html.TextBoxFor(model => Model.OfferCount, new { @class = "form-control hidden", @type = "text" })

            <div>

                <table id="SupplierTable" ststyle="padding:2px; margin-left:20px ;width:80%" border="1">
                    <thead>
                        <tr>
                            <th colspan="3">
                                @if (Model.OfferCount > 0)
                                {
                                    <button onclick="showDeleteBtn()" name="BtnDeleteBtnShower" data-toggle="modal" type="button" style="border-radius:0px; vertical-align:middle; padding:2px; height:24px; font-weight:bolder" class="btn btn-warning "><i class="fa fa-remove"></i>Teklif Silme</button>
                                    <button onclick="hideDeleteBtn()" name="BtnDeleteBtnHider" hidden="hidden" data-toggle="modal" type="button" style="border-radius:0px;vertical-align:middle; padding:2px;height:24px;font-weight:bolder" class="btn btn-warning "><i class="fa fa-remove"></i>Teklif Silme</button>

                                }
                            </th>


                            <th>Tedarikçi Kodu</th>
                            <th>Tedarikçi Unvanı</th>
                            @{ int countOffer=1;}
                            @for (int i = 1; i < Model.OfferCount + 1; i++)
                            {
                                <th align="center" style="vertical-align:middle">
                                    <div class="form-group-inner" style="vertical-align:middle">
                                        <div class="form-group data-custon-pick" style="margin:0;vertical-align:middle" id="data_1">
                                            <div class="input-group col-lg-12" style="vertical-align:middle">

                                                @countOffer.ToString() .Teklif (KDV Dahil)

                                                <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon btn-danger" style="background-color:orangered;cursor:pointer;vertical-align:middle" onclick="removeOffers(@countOffer)"><i class="fa fa-remove"></i></span>

                                            </div>
                                        </div>
                                    </div>



                                </th>
                                countOffer++;
                            }

                        </tr>


                        <tr>
                            <th colspan="4">



                            </th>
                            <th>


                            </th>

                            @{ countOffer = 1;}
                            @for (int i = 1; i < Model.OfferCount + 1; i++)
                            {
                                <th align="center">
                                    <a role="button" onclick="openAWindow('Demands/OfferDetail?ProjectId=@Model.ProjectId&OfferNr=@countOffer', 'Teklif Detayı' , 920, 640, true)" class="btn btn-info" style="padding:2px;width:100%;border-radius:0"><i class="fa fa-edit"></i> Teklif Detayları</a>

                                </th>
                                countOffer++;
                            }

                        </tr>

                    </thead>
                    <tbody id="OfferSupplierList">

                        @{ int count=1; }

                        @for (int i = 0; i < Model.Suppliers.Count; i++)
                        {

                            <tr>
                                <td style="vertical-align:middle">
                                    <div class="i-checks pull-left">
                                        <label style="margin-bottom:0px">
                                            @Html.CheckBox("cboxRequestSupplier_" + @i, true)
                                        </label>
                                    </div>
                                </td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                @if (Model.Suppliers[i].NetTotals.Count > 0)
                                                {
                                                    if (Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].Responded == 0)
                                                    {


                                                        <button data-target="#ModalSendReminder_@i" data-toggle="modal" type="button" style="width:100%;font-weight:bolder" title="Hatırlatma Gönder" class="btn btn-success pull-left">H</button>
                                                        <div id="ModalSendReminder_@i" class="modal modal-adminpro-general Customwidth-popup-WarningModal fade" role="dialog">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-close-area modal-close-df">
                                                                        <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <br />

                                                                        <br />
                                                                        <h4>Hatırlatma</h4>
                                                                        <br />
                                                                        @Model.Suppliers[i].SupplierDesc tedarikçisine hatırlatma için
                                                                        <br />
                                                                        e-posta göndermek istiyor musunuz?
                                                                        <br />

                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button data-dismiss="modal" class="btn btn-rounded  btn-warning"><i class="fa fa-close adminpro-informatio" aria-hidden="true"></i> Vazgeç</button>

                                                                        <button data-dismiss="modal" type="button" style="background-color:orangered;cursor:pointer" onclick="sendReminder('@Model.Suppliers[i].NetTotals[@Model.Suppliers[i].NetTotals.Count - 1].RequestGuid.ToString()')" class="btn btn-success"><i class="fa fa-envelope adminpro-informatio" aria-hidden="true"></i> Gönder</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    }
                                                    else
                                                    {
                                                        <button disabled type="button" style="width:100%;font-weight:bolder" title="" class="btn btn-default pull-left">H</button>
                                                    }
                                                }
                                                else
                                                {
                                                    <button disabled type="button" style="width:100%;font-weight:bolder" title="" class="btn btn-default pull-left">H</button>
                                                }
                                            </td>
                                            <td>
                                                <button type="button" onclick="openAWindow('Offer/ManuelOfferGet?ProjectId=@Model.ProjectId&SupplierRef=@Model.Suppliers[i].SupplierRef ', 'Doküman İzleme' , 920, 640, true)" style="width:100%;font-weight:bolder;height:34px" title="Teklif Gir" class="btn btn-info pull-right"><i class="fa fa-edit"></i></button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td align="center">@count</td>
                                <td>
                                    @Html.TextBoxFor(model => Model.Suppliers[i].SupplierRef, new { @class = "form-control hidden", @type = "text" })
                                    @Html.TextBoxFor(model => @Model.Suppliers[i].SupplierCode, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important" })

                                </td>
                                <td>
                                    @Html.TextBoxFor(model => @Model.Suppliers[i].SupplierDesc, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important" })
                                </td>



                                @for (int j = 0; j < Model.OfferCount; j++)
                                {

                                    if (Model.Suppliers[i].NetTotals[j].Responded == 0)
                                    {
                                        <td>
                                            <div class="form-group-inner">
                                                <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                    <div class="input-group col-lg-12">

                                                        @Html.TextBox("Suppliers_" + i + "__NetTotals_" + j + "__NetTotal", 0, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important;background-color:cadetblue; text-align:right" })

                                                        <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>

                                                    </div>
                                                </div>
                                            </div>
                                        </td>

                                    }
                                    else if (Model.Suppliers[i].NetTotals[j].Responded == 2)
                                    {

                                        <td>
                                            @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[j].RequestNr, new { @class = "hidden" })
                                            <div class="form-group-inner">
                                                <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                    <div class="input-group col-lg-12">

                                                        <div id="parent">
                                                            @Html.TextBox("txtNotOffered_" + i.ToString() + "_" + j.ToString(), "Teklif Vermedi", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "color:white; font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right;background-color:orangered;cursor:pointer", @onclick = "getOfferExplain('" + @Model.Suppliers[i].NetTotals[j].RequestGuid + "')" })
                                                        </div>
                                                        <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>

                                                    </div>
                                                </div>
                                            </div>
                                        </td>


                                    }
                                    else if (Model.Suppliers[i].NetTotals[j].Responded == 3)
                                    {

                                        <td>
                                            @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[j].RequestNr, new { @class = "hidden" })
                                            <div class="form-group-inner">
                                                <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                    <div class="input-group col-lg-12">


                                                        @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[j].NetTotal, "{0:N2}", new { @Name = "txtResponded3", @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right;background-color:red;color:white" })

                                                        <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>
                                                        <div id="pop">
                                                            @Html.TextBox("txtNotOffered_" + i.ToString() + "_" + j.ToString(), "Kısmı Teklif Verdi", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "color:white; font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right;background-color:orangered;cursor:pointer", @onclick = "getOfferExplain('" + @Model.Suppliers[i].NetTotals[j].RequestGuid + "')" })

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>


                                    }
                                    else
                                    {




                                        if (Model.Suppliers[i].NetTotals.Count > j && j == Model.Suppliers[i].NetTotals[j].RequestNr - 1)
                                        {
                                            <td>
                                                @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[j].RequestNr, new { @class = "hidden" })
                                                <div class="form-group-inner">
                                                    <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                        <div class="input-group col-lg-12">



                                                            @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[j].NetTotal, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right;background-color:lightgray" })

                                                            <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>

                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        }
                                        else if (Model.Suppliers[i].NetTotals.Count == 0)
                                        {
                                            <td>
                                                @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[j].RequestNr, new { @class = "hidden" })
                                                <div class="form-group-inner">
                                                    <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                        <div class="input-group col-lg-12">
                                                            @Html.TextBox("Suppliers_" + i + "__NetTotals_" + j + "__NetTotal", 0, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important;background-color:yellow; text-align:right" })
                                                            <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>

                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        }
                                        else if (Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].RequestNr > j + 1)
                                        {
                                            <td>
                                                @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[j].RequestNr, new { @class = "hidden" })
                                                <div class="form-group-inner">
                                                    <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                        <div class="input-group col-lg-12">
                                                            @Html.TextBox("Suppliers_" + i + "__NetTotals_" + j + "__NetTotal", 0, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important;background-color:coral; text-align:right" })


                                                            <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>

                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        }
                                        else if (Model.Suppliers[i].NetTotals.Max(x => x.RequestNr) == Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].RequestNr)
                                        {
                                            <td>
                                                @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].RequestNr, new { @class = "hidden" })
                                                <div class="form-group-inner">
                                                    <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                        <div class="input-group col-lg-12">
                                                            @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].NetTotal, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important; text-align:right;background-color:lightgray" })
                                                            <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>

                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        }
                                        else
                                        {


                                            <td>
                                                @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].RequestNr, new { @class = "hidden" })
                                                <div class="form-group-inner">
                                                    <div class="form-group data-custon-pick" style="margin:0" id="data_1">
                                                        <div class="input-group col-lg-12">
                                                            @Html.TextBoxFor(model => Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].NetTotal, "{0:N2}", new { @class = "form-control", @readonly = "readonly", @type = "text", @style = "font-weight: bold;font-size:12px !Important;width:100% !important;background-color:yellow; text-align:right" })
                                                            <span name="btnDeleteOffer" hidden="hidden" class="input-group-addon  btn-danger" style="background-color:orangered;cursor:pointer" onclick="removeOffer(@Model.Suppliers[i].NetTotals[j].RequestNr,@Model.Suppliers[i].SupplierRef)"><i class="fa fa-remove"></i></span>

                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        }


                                    }

                                }

                                @*<td style="padding:3px">
                                        <div class="input-group">

                                            <div class="input-group-btn custom-dropdowns-button">
                                                <button style="height:30px" data-toggle="dropdown" class="btn btn-warning" type="button" aria-expanded="false">
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li>
                                                        <a onclick="openAWindow('Offer/ManuelOfferGet?ProjectId=@Model.ProjectId&SupplierRef=@Model.Suppliers[i].SupplierRef ', 'Doküman İzleme' , 920, 640, true)" style="width:100%;font-weight:bolder" title="Teklif Gir" class="btn btn-default">Teklif Ekle</a>

                                                    </li>
                                                    <li class="divider"></li>
                                                    @if (Model.Suppliers[i].NetTotals.Count > 0)
                                                    {
                                                        if (Model.Suppliers[i].NetTotals[Model.Suppliers[i].NetTotals.Count - 1].Responded == 0)
                                                        {
                                                            <li>

                                                                <button data-target="#ModalSendReminder_@i" data-toggle="modal" type="button" style="width:100%;font-weight:bolder" title="Hatırlatma Gönder" class="btn btn-default">Hatırlatma Gönder</button>

                                                            </li>
                                                        }
                                                    }
                                                    <li class="divider"></li>





                                                    <li>

                                                    </li>


                                                </ul>
                                            </div>
                                        </div>
                                        @if (Model.Suppliers[i].NetTotals.Count > 0)
                                        {
                                            <div id="ModalSendReminder_@i" class="modal modal-adminpro-general Customwidth-popup-WarningModal fade" role="dialog">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-close-area modal-close-df">
                                                            <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
                                                        </div>
                                                        <div class="modal-body">
                                                            <br />

                                                            <br />
                                                            <h4>Hatırlatma</h4>
                                                            <br />
                                                            @Model.Suppliers[i].SupplierDesc tedarikçisine hatırlatma için
                                                            <br />
                                                            e-posta göndermek istiyor musunuz?
                                                            <br />

                                                        </div>
                                                        <div class="modal-footer">
                                                            <button data-dismiss="modal" class="btn btn-rounded  btn-warning"><i class="fa fa-close adminpro-informatio" aria-hidden="true"></i> Vazgeç</button>

                                                            <button data-dismiss="modal" type="button" style="background-color:orangered;cursor:pointer" onclick="sendReminder('@Model.Suppliers[i].NetTotals[@Model.Suppliers[i].NetTotals.Count - 1].RequestGuid.ToString()')" class="btn btn-success"><i class="fa fa-envelope adminpro-informatio" aria-hidden="true"></i> Gönder</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </td>*@


                            </tr>

                            count++;

                        }

                    </tbody>
                </table>


            </div>

        </div>







        <div class="col-lg-12" style="margin-bottom:10px">
            <div class="col-lg-6">
                <div class="form-group-inner">
                    <div class="row comment">
                        <label>Açıklama</label>
                        <div class="form-group-inner">

                        </div>
                        @Html.TextAreaFor(model => Model.Explanation, new { @class = "form-control textinput" })
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group-inner">
                    <div class="row comment">

                        <div class="form-group-inner">
                            <label>Teslimat Adresi</label>
                            @Html.CheckBoxFor(model => model.isDeliveryAddress)
                        </div>
                        @if (@Model.isDeliveryAddress)
                        {
                            @Html.TextAreaFor(model => Model.DeliveryAddress, new { @class = "form-control textinput" })
                        }
                        else
                        {
                            @Html.TextAreaFor(model => Model.DeliveryAddress, new { @class = "form-control textinput", @readonly = "readonly" })
                        }
                    </div>
                </div>
            </div>



        </div>

    </div>
    <br />

    <br />

}
<div class="row" style="margin-top: 0px; margin-left: 25px">
    <div class="multi-uploaded-area mg-tb-15" style="margin-top:25px;">
        <div class="row">

            <div class="col-lg-6">
                <div class="form-group-inner">
                    <div class="row">
                        <div class="dropzone-pro">
                            <div id="dropzone">
                                <form action="/upload" class="dropzone dropzone-custom needsclick" id="demo-upload">
                                    <div class="dz-message needsclick download-custom">
                                        <i class="fa fa-cloud-download" aria-hidden="true"></i>
                                        <h2>Yüklenecek dosyaları sürükleyin yada buraya tıklayınız..</h2>

                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-10">
                        <div class="form-group-inner input-with-warning" id="warningResult">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-select-list">
                                        <input name="txtUploadResult" style="text-align:center;font-size:20px;color:white;font-weight:bold" type="text" class="form-control" value="Upload sonucu">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <table width="100%" id="OfferDocumentTable">
                    <thead>
                        <tr>
                            <th colspan="5" style="text-align:center">Dökümanlar</th>

                        </tr>
                    </thead>
                    <tbody id="OfferDocumentTableBody">
                        @for (int i = 0; i < Model.DocList.Count; i++)
                        {


                            <tr>


                                <td width="35%">@Model.DocList[i].UploadedFileName
                                <td width="30%">
                                    @Html.TextBoxFor(model => @Model.DocList[i].Id, new { @class = "form-control hidden", @type = "number" })
                                    @Html.TextBoxFor(model => @Model.DocList[i].DocumentName, new { @class = "form-control", @type = "text", @style = "font-weight: bold;font-size:12px !Important" })
                                </td>

                                <td width="18%">
                                    <a role="button" onclick="openAWindow('Demands/FileView?DocumentId=@Model.DocList[i].Id', 'Doküman İzleme' , 920, 640, true)" class="btn btn-info"><i class="fa fa-street-view"> </i> İncele</a>

                                </td>

                                <td width="17%">
                                    <a role="button" onclick="SaveDocumentName('@i')" class="btn btn-success"><i class="fa fa-save"> </i> Kaydet</a>

                                </td>
                                <td width="10%">
                                    <a role="button" onclick="DeleteDocument('@i')" class="btn btn-danger"><i class="fa fa-remove"></i> Sil</a>

                                </td>
                            </tr>
                        }
                    </tbody>


                </table>
            </div>
        </div>
    </div>
</div>

<div id="ModalSupplierControl" class="modal modal-adminpro-general Customwidth-popup-WarningModal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-close-area modal-close-df">
                <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
            </div>
            <div class="modal-body">
                <br />
                <br />
                Aşağıdaki tedarikçiler kontrollü müşteri listesinde olduğu için seçilemez. <br />
                <br />
                <table id="requestListTable" width="100%">
                    <tbody id="supplierControl"></tbody>
                </table>
                <br /> <br />
            </div>
            <div class="modal-footer">
                <button data-dismiss="modal" class="btn btn-rounded  btn-warning"><i class="fa fa-close adminpro-informatio" aria-hidden="true"></i> Tamam</button>

            </div>
        </div>
    </div>
</div>




<div id="ModalCancelOffer" class="modal modal-adminpro-general Customwidth-popup-WarningModal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-close-area modal-close-df">
                <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
            </div>
            <div class="modal-body">
                <br />
                Projeyi iptal etme istiyor musunuz?

            </div>
            <div class="modal-footer">
                <button data-dismiss="modal" class="btn btn-rounded  btn-warning"><i class="fa fa-backward adminpro-informatio" aria-hidden="true"></i> Vazge.</button>
                <a type="button" style="margin-top:0px;margin-right:5px" href="@Url.Action("CancelOffer", "Demands",new { ProjectId=Model.ProjectId })" class="btn btn-rounded  btn-danger pull-right"><i class="fa fa-remove adminpro-informatio" aria-hidden="true"></i> İptal </a>


            </div>
        </div>
    </div>
</div>
